<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css">
  <link rel="shortcut icon" href="/assets/favico/favicon.ico" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <title>Rocketflix</title>
</head>

<body>
  <main>
    <div class="w-100 h-100 container d-flex align-items-center flex-column gap-2">
      <img class="mt-5 pt-5" src="images/logo" alt="logo">
      <h1 class="title">Não sabe o que assistir?
      </h1>
      <div id="movie" class="movie d-flex flex-row w-75 justify-content-center">

      </div>
      <button onclick="get()" class="button py-2 px-3 rounded mb-3"><img src="images/buttonIcon" alt="logo botão">
        Encontrar
        filme</button>
      <p class="description text-center fs-6">Clique em "Encontrar filme" que traremos informações <br>
        de algum filme para você assistir hoje.</p>

    </div>
  </main>
  <script>
    //const fetch = (...args) => import('node-fetch').then(({ default: fetch }) => fetch(...args));
    async function get() {
      const movie = document.getElementById('movie');
      // const movieImg = document.getElementById('movieImg');
      // const movieDescription = document.getElementById('movieDescription');
      const aleatoryPage = Math.round(Math.random() * 500)
      const arrayMovie = Math.floor(Math.random() * 20)
      const response = await fetch('https://api.themoviedb.org/3/movie/popular?api_key=037554f5230123a5c8a8aad9ab7622ac&language=pt-BR&page=' + aleatoryPage)
      const logtext = await response.text()
      const selectedMovie = JSON.parse(logtext).results[arrayMovie]
      // const responseImg = await fetch(`https://image.tmdb.org/t/p/w500/${selectedMovie.poster_path}`)
      //const imgText = await responseImg.text()
      // movieImg.src = ''
      // movieImg.alt = ''
      // movieTitle.innerHTML = ''
      // movieDescription.innerHTML = ''
      // movieImg.src = `https://image.tmdb.org/t/p/w200/${selectedMovie.poster_path}`
      // movieImg.alt = selectedMovie.title
      // movieTitle.innerHTML = selectedMovie.title
      // movieDescription.innerHTML = selectedMovie.overview
      movie.innerHTML = ''
      movie.innerHTML = `<img id="movieImg" class="float-start img-thumbnail h-75" src="${'https://image.tmdb.org/t/p/w200/' + selectedMovie.poster_path}" alt="${selectedMovie.title}">
        <div class="float-end w-50 mx-5">
          <h4 id="movieTitle" class="movie-title">
            ${selectedMovie.title}
          </h4>
          <p id="movieDescription" class="movie-description fs-5">
            ${selectedMovie.overview}
          </p>
        </div>`




    }

  </script>
  <script type="module" src="main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>
</body>

</html>